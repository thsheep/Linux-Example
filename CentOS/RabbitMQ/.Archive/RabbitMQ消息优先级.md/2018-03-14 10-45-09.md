### 优先队列支持
从版本3.5.0开始，RabbitMQ在核心中实现优先队列。

您可以使用x-max-priority参数声明优先级队列。该参数应该是一个整数，指示队列应该支持的最大优先级。

例如Java客户端：

```java:n
Channel ch = ...;
Map<String, Object> args = new HashMap<String, Object>();
args.put("x-max-priority", 10);
ch.queueDeclare("my-priority-queue", true, false, false, args);
```

然后，您可以使用**basic.properties**的优先级字段发布优先消息。数字越大表示优先级越高。

因为优先级队列的磁盘格式不同，所以优先级队列只能由参数定义，而不能由策略定义。队列永远不会改变它们支持的优先级数量。

#### 特性：

AMQP 0-9-1规范对于优先级的工作方式有些模糊。它表示所有队列必须至少支持2个优先级，并且可以支持多达10个。它没有定义如何处理没有优先级属性的消息。

与AMQP 0-9-1规格相反，默认情况下，RabbitMQ队列不支持优先级。在创建优先级队列时，您可以根据需要指定任意数量的优先级。

**注意：**

每个队列的每个优先级有一些内存和磁盘上的成本。还有一个额外的CPU成本，特别是在消费时，所以最好不要创造太多的优先级队列。

消息priority字段被定义为无符号字节，所以实际上优先级应该在0到255之间。
